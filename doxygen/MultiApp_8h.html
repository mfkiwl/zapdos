<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Zapdos: moose/framework/include/multiapps/MultiApp.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
    <a href="https://shannon-lab.github.io/zapdos" style="text-decoration:none"><div id="projectname">Zapdos</div></a><div id="projectname">
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_4c7d3be2d60f4d6ad3d0ee61864d0537.html">moose</a></li><li class="navelem"><a class="el" href="dir_6f4eeb6ddb4ae754f551cb2d3dec9e8e.html">framework</a></li><li class="navelem"><a class="el" href="dir_c93db0d741ce16b279e255e30f2a15df.html">include</a></li><li class="navelem"><a class="el" href="dir_e5b353a149cbd5e22edddb6f12783c37.html">multiapps</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#namespaces">Namespaces</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">MultiApp.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p><a href="MultiApp_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLocalRankConfig.html">LocalRankConfig</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds app partitioning information relevant to the a particular rank for a multiapp scenario.  <a href="structLocalRankConfig.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSubAppBackups.html">SubAppBackups</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper class for holding Sub-app backups.  <a href="classSubAppBackups.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMultiApp.html">MultiApp</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A <a class="el" href="classMultiApp.html" title="A MultiApp represents one or more MOOSE applications that are running simultaneously.">MultiApp</a> represents one or more MOOSE applications that are running simultaneously.  <a href="classMultiApp.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacelibMesh"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelibMesh.html">libMesh</a></td></tr>
<tr class="memdesc:namespacelibMesh"><td class="mdescLeft">&#160;</td><td class="mdescRight">The following methods are specializations for using the libMesh::Parallel::packed_range_* routines for std::strings. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespacelibMesh_1_1MeshTools"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelibMesh_1_1MeshTools.html">libMesh::MeshTools</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a02c31122abe1a6403c08f6f67353d531"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structLocalRankConfig.html">LocalRankConfig</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MultiApp_8h.html#a02c31122abe1a6403c08f6f67353d531">rankConfig</a> (processor_id_type rank, processor_id_type nprocs, dof_id_type napps, processor_id_type min_app_procs, processor_id_type max_app_procs, bool batch_mode=false)</td></tr>
<tr class="memdesc:a02c31122abe1a6403c08f6f67353d531"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns app partitioning information relevant to the given rank for a multiapp scenario with the given number of apps (napps) and parallel/mpi procs (nprocs).  <a href="MultiApp_8h.html#a02c31122abe1a6403c08f6f67353d531">More...</a><br /></td></tr>
<tr class="separator:a02c31122abe1a6403c08f6f67353d531"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc7d54025711c6208debef0461a96e7d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MultiApp_8h.html#adc7d54025711c6208debef0461a96e7d">dataStore</a> (std::ostream &amp;stream, <a class="el" href="classSubAppBackups.html">SubAppBackups</a> &amp;backups, void *context)</td></tr>
<tr class="separator:adc7d54025711c6208debef0461a96e7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5db46ea99f2d5bcea87d7e70eb7e97d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MultiApp_8h.html#ae5db46ea99f2d5bcea87d7e70eb7e97d">dataLoad</a> (std::istream &amp;stream, <a class="el" href="classSubAppBackups.html">SubAppBackups</a> &amp;backups, void *context)</td></tr>
<tr class="separator:ae5db46ea99f2d5bcea87d7e70eb7e97d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae5db46ea99f2d5bcea87d7e70eb7e97d" name="ae5db46ea99f2d5bcea87d7e70eb7e97d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5db46ea99f2d5bcea87d7e70eb7e97d">&#9670;&#160;</a></span>dataLoad()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dataLoad </td>
          <td>(</td>
          <td class="paramtype">std::istream &amp;&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classSubAppBackups.html">SubAppBackups</a> &amp;&#160;</td>
          <td class="paramname"><em>backups</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="MultiApp_8C_source.html#l01380">1380</a> of file <a class="el" href="MultiApp_8C_source.html">MultiApp.C</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1381</span>{</div>
<div class="line"><span class="lineno"> 1382</span>  <a class="code hl_class" href="classMultiApp.html">MultiApp</a> * multi_app = <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classMultiApp.html">MultiApp</a> *<span class="keyword">&gt;</span>(context);</div>
<div class="line"><span class="lineno"> 1383</span>  mooseAssert(multi_app, <span class="stringliteral">&quot;Not set&quot;</span>);</div>
<div class="line"><span class="lineno"> 1384</span> </div>
<div class="line"><span class="lineno"> 1385</span>  <a class="code hl_function" href="MultiApp_8C.html#ae5db46ea99f2d5bcea87d7e70eb7e97d">dataLoad</a>(stream, <span class="keyword">static_cast&lt;</span>std::vector&lt;std::unique_ptr&lt;Backup&gt;<span class="keyword">&gt;</span> &amp;&gt;(backups), <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno"> 1386</span> </div>
<div class="line"><span class="lineno"> 1387</span>  multi_app-&gt;<a class="code hl_function" href="classMultiApp.html#a3b75d14817526ced7efcffbce2d25725">restore</a>();</div>
<div class="line"><span class="lineno"> 1388</span>}</div>
<div class="ttc" id="aMultiApp_8C_html_ae5db46ea99f2d5bcea87d7e70eb7e97d"><div class="ttname"><a href="MultiApp_8C.html#ae5db46ea99f2d5bcea87d7e70eb7e97d">dataLoad</a></div><div class="ttdeci">void dataLoad(std::istream &amp;stream, SubAppBackups &amp;backups, void *context)</div><div class="ttdef"><b>Definition:</b> <a href="MultiApp_8C_source.html#l01380">MultiApp.C:1380</a></div></div>
<div class="ttc" id="aclassMultiApp_html"><div class="ttname"><a href="classMultiApp.html">MultiApp</a></div><div class="ttdoc">A MultiApp represents one or more MOOSE applications that are running simultaneously.</div><div class="ttdef"><b>Definition:</b> <a href="MultiApp_8h_source.html#l00112">MultiApp.h:116</a></div></div>
<div class="ttc" id="aclassMultiApp_html_a3b75d14817526ced7efcffbce2d25725"><div class="ttname"><a href="classMultiApp.html#a3b75d14817526ced7efcffbce2d25725">MultiApp::restore</a></div><div class="ttdeci">virtual void restore(bool force=true)</div><div class="ttdoc">Restore the state of every Sub App.</div><div class="ttdef"><b>Definition:</b> <a href="MultiApp_8C_source.html#l00736">MultiApp.C:736</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="MultiApp_8C_source.html#l01380">dataLoad()</a>.</p>

</div>
</div>
<a id="adc7d54025711c6208debef0461a96e7d" name="adc7d54025711c6208debef0461a96e7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc7d54025711c6208debef0461a96e7d">&#9670;&#160;</a></span>dataStore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dataStore </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classSubAppBackups.html">SubAppBackups</a> &amp;&#160;</td>
          <td class="paramname"><em>backups</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="MultiApp_8C_source.html#l01369">1369</a> of file <a class="el" href="MultiApp_8C_source.html">MultiApp.C</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1370</span>{</div>
<div class="line"><span class="lineno"> 1371</span>  <a class="code hl_class" href="classMultiApp.html">MultiApp</a> * multi_app = <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classMultiApp.html">MultiApp</a> *<span class="keyword">&gt;</span>(context);</div>
<div class="line"><span class="lineno"> 1372</span>  mooseAssert(multi_app, <span class="stringliteral">&quot;Not set&quot;</span>);</div>
<div class="line"><span class="lineno"> 1373</span> </div>
<div class="line"><span class="lineno"> 1374</span>  multi_app-&gt;<a class="code hl_function" href="classMultiApp.html#a95d801ccc739d7d6dacaa8fbc9a8f600">backup</a>();</div>
<div class="line"><span class="lineno"> 1375</span> </div>
<div class="line"><span class="lineno"> 1376</span>  <a class="code hl_function" href="MultiApp_8C.html#adc7d54025711c6208debef0461a96e7d">dataStore</a>(stream, <span class="keyword">static_cast&lt;</span>std::vector&lt;std::unique_ptr&lt;Backup&gt;<span class="keyword">&gt;</span> &amp;&gt;(backups), <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno"> 1377</span>}</div>
<div class="ttc" id="aMultiApp_8C_html_adc7d54025711c6208debef0461a96e7d"><div class="ttname"><a href="MultiApp_8C.html#adc7d54025711c6208debef0461a96e7d">dataStore</a></div><div class="ttdeci">void dataStore(std::ostream &amp;stream, SubAppBackups &amp;backups, void *context)</div><div class="ttdef"><b>Definition:</b> <a href="MultiApp_8C_source.html#l01369">MultiApp.C:1369</a></div></div>
<div class="ttc" id="aclassMultiApp_html_a95d801ccc739d7d6dacaa8fbc9a8f600"><div class="ttname"><a href="classMultiApp.html#a95d801ccc739d7d6dacaa8fbc9a8f600">MultiApp::backup</a></div><div class="ttdeci">virtual void backup()</div><div class="ttdoc">Save off the state of every Sub App.</div><div class="ttdef"><b>Definition:</b> <a href="MultiApp_8C_source.html#l00721">MultiApp.C:721</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="MultiApp_8C_source.html#l01369">dataStore()</a>.</p>

</div>
</div>
<a id="a02c31122abe1a6403c08f6f67353d531" name="a02c31122abe1a6403c08f6f67353d531"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02c31122abe1a6403c08f6f67353d531">&#9670;&#160;</a></span>rankConfig()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structLocalRankConfig.html">LocalRankConfig</a> rankConfig </td>
          <td>(</td>
          <td class="paramtype">processor_id_type&#160;</td>
          <td class="paramname"><em>rank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">processor_id_type&#160;</td>
          <td class="paramname"><em>nprocs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dof_id_type&#160;</td>
          <td class="paramname"><em>napps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">processor_id_type&#160;</td>
          <td class="paramname"><em>min_app_procs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">processor_id_type&#160;</td>
          <td class="paramname"><em>max_app_procs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>batch_mode</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns app partitioning information relevant to the given rank for a multiapp scenario with the given number of apps (napps) and parallel/mpi procs (nprocs). </p>
<p >min_app_procs and max_app_procs define the min and max number of procs that must/can be used in parallel to run a given (sub)app. batch_mode affects whether 1 subapp is assigned per rank to be re-used to run each of the (napps) simulations or whether 1 subapp is created for each napps simulation (globally).</p>
<p >Each proc calls this function in order to determine which (sub)apps among the global list of all subapps for a multiapp should be run by the given rank. </p>

<p class="definition">Definition at line <a class="el" href="MultiApp_8C_source.html#l01184">1184</a> of file <a class="el" href="MultiApp_8C_source.html">MultiApp.C</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1190</span>{</div>
<div class="line"><span class="lineno"> 1191</span>  <span class="keywordflow">if</span> (min_app_procs &gt; nprocs)</div>
<div class="line"><span class="lineno"> 1192</span>    <a class="code hl_function" href="MooseError_8h.html#aa959168eed29caa7aaa85ffc1319a9ad">mooseError</a>(<span class="stringliteral">&quot;minimum number of procs per app is higher than the available number of procs&quot;</span>);</div>
<div class="line"><span class="lineno"> 1193</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (min_app_procs &gt; max_app_procs)</div>
<div class="line"><span class="lineno"> 1194</span>    <a class="code hl_function" href="MooseError_8h.html#aa959168eed29caa7aaa85ffc1319a9ad">mooseError</a>(<span class="stringliteral">&quot;minimum number of procs per app must be lower than the max procs per app&quot;</span>);</div>
<div class="line"><span class="lineno"> 1195</span> </div>
<div class="line"><span class="lineno"> 1196</span>  mooseAssert(rank &lt; nprocs, <span class="stringliteral">&quot;rank must be smaller than the number of procs&quot;</span>);</div>
<div class="line"><span class="lineno"> 1197</span> </div>
<div class="line"><span class="lineno"> 1198</span>  <span class="comment">// A &quot;slot&quot; is a group of procs/ranks that are grouped together to run a</span></div>
<div class="line"><span class="lineno"> 1199</span>  <span class="comment">// single (sub)app/sim in parallel.</span></div>
<div class="line"><span class="lineno"> 1200</span> </div>
<div class="line"><span class="lineno"> 1201</span>  <span class="keyword">const</span> processor_id_type slot_size =</div>
<div class="line"><span class="lineno"> 1202</span>      std::max(std::min(cast_int&lt;processor_id_type&gt;(nprocs / napps), max_app_procs), min_app_procs);</div>
<div class="line"><span class="lineno"> 1203</span>  <span class="keyword">const</span> processor_id_type nslots = std::min(</div>
<div class="line"><span class="lineno"> 1204</span>      nprocs / slot_size,</div>
<div class="line"><span class="lineno"> 1205</span>      cast_int&lt;processor_id_type&gt;(std::min(</div>
<div class="line"><span class="lineno"> 1206</span>          <span class="keyword">static_cast&lt;</span>dof_id_type<span class="keyword">&gt;</span>(std::numeric_limits&lt;processor_id_type&gt;::max()), napps)));</div>
<div class="line"><span class="lineno"> 1207</span>  mooseAssert(nprocs &gt;= (nslots * slot_size),</div>
<div class="line"><span class="lineno"> 1208</span>              <span class="stringliteral">&quot;Ensure that leftover procs is represented by an unsigned type&quot;</span>);</div>
<div class="line"><span class="lineno"> 1209</span>  <span class="keyword">const</span> processor_id_type leftover_procs = nprocs - nslots * slot_size;</div>
<div class="line"><span class="lineno"> 1210</span>  <span class="keyword">const</span> dof_id_type apps_per_slot = napps / nslots;</div>
<div class="line"><span class="lineno"> 1211</span>  <span class="keyword">const</span> dof_id_type leftover_apps = napps % nslots;</div>
<div class="line"><span class="lineno"> 1212</span> </div>
<div class="line"><span class="lineno"> 1213</span>  std::vector&lt;int&gt; slot_for_rank(nprocs);</div>
<div class="line"><span class="lineno"> 1214</span>  processor_id_type slot = 0;</div>
<div class="line"><span class="lineno"> 1215</span>  processor_id_type procs_in_slot = 0;</div>
<div class="line"><span class="lineno"> 1216</span>  <span class="keywordflow">for</span> (processor_id_type rankiter = 0; rankiter &lt;= rank; rankiter++)</div>
<div class="line"><span class="lineno"> 1217</span>  {</div>
<div class="line"><span class="lineno"> 1218</span>    <span class="keywordflow">if</span> (slot &lt; nslots)</div>
<div class="line"><span class="lineno"> 1219</span>      slot_for_rank[rankiter] = cast_int&lt;int&gt;(slot);</div>
<div class="line"><span class="lineno"> 1220</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1221</span>      slot_for_rank[rankiter] = -1;</div>
<div class="line"><span class="lineno"> 1222</span>    procs_in_slot++;</div>
<div class="line"><span class="lineno"> 1223</span>    <span class="comment">// this slot keeps growing until we reach slot size plus possibly an extra</span></div>
<div class="line"><span class="lineno"> 1224</span>    <span class="comment">// proc if there were any leftover from the slotization of nprocs - this</span></div>
<div class="line"><span class="lineno"> 1225</span>    <span class="comment">// must also make sure we don&#39;t go over max app procs.</span></div>
<div class="line"><span class="lineno"> 1226</span>    <span class="keywordflow">if</span> (procs_in_slot == slot_size + 1 * (slot &lt; leftover_procs &amp;&amp; slot_size &lt; max_app_procs))</div>
<div class="line"><span class="lineno"> 1227</span>    {</div>
<div class="line"><span class="lineno"> 1228</span>      procs_in_slot = 0;</div>
<div class="line"><span class="lineno"> 1229</span>      slot++;</div>
<div class="line"><span class="lineno"> 1230</span>    }</div>
<div class="line"><span class="lineno"> 1231</span>  }</div>
<div class="line"><span class="lineno"> 1232</span> </div>
<div class="line"><span class="lineno"> 1233</span>  <span class="keywordflow">if</span> (slot_for_rank[rank] &lt; 0)</div>
<div class="line"><span class="lineno"> 1234</span>    <span class="comment">// ranks assigned a negative slot don&#39;t have any apps running on them.</span></div>
<div class="line"><span class="lineno"> 1235</span>    <span class="keywordflow">return</span> {0, 0, 0, 0, <span class="keyword">false</span>, 0};</div>
<div class="line"><span class="lineno"> 1236</span>  <span class="keyword">const</span> processor_id_type slot_num = cast_int&lt;processor_id_type&gt;(slot_for_rank[rank]);</div>
<div class="line"><span class="lineno"> 1237</span> </div>
<div class="line"><span class="lineno"> 1238</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> is_first_local_rank = rank == 0 || (slot_for_rank[rank - 1] != slot_for_rank[rank]);</div>
<div class="line"><span class="lineno"> 1239</span>  <span class="keyword">const</span> dof_id_type n_local_apps = apps_per_slot + 1 * (slot_num &lt; leftover_apps);</div>
<div class="line"><span class="lineno"> 1240</span> </div>
<div class="line"><span class="lineno"> 1241</span>  processor_id_type my_first_rank = 0;</div>
<div class="line"><span class="lineno"> 1242</span>  <span class="keywordflow">for</span> (processor_id_type rankiter = rank; rankiter &gt; 0; rankiter--)</div>
<div class="line"><span class="lineno"> 1243</span>    <span class="keywordflow">if</span> (slot_for_rank[rank] != slot_for_rank[rankiter])</div>
<div class="line"><span class="lineno"> 1244</span>    {</div>
<div class="line"><span class="lineno"> 1245</span>      my_first_rank = cast_int&lt;processor_id_type&gt;(slot_for_rank[rankiter + 1]);</div>
<div class="line"><span class="lineno"> 1246</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1247</span>    }</div>
<div class="line"><span class="lineno"> 1248</span> </div>
<div class="line"><span class="lineno"> 1249</span>  dof_id_type app_index = 0;</div>
<div class="line"><span class="lineno"> 1250</span>  <span class="keywordflow">for</span> (processor_id_type slot = 0; slot &lt; slot_num; slot++)</div>
<div class="line"><span class="lineno"> 1251</span>  {</div>
<div class="line"><span class="lineno"> 1252</span>    <span class="keyword">const</span> dof_id_type num_slot_apps = apps_per_slot + 1 * (slot &lt; leftover_apps);</div>
<div class="line"><span class="lineno"> 1253</span>    app_index += num_slot_apps;</div>
<div class="line"><span class="lineno"> 1254</span>  }</div>
<div class="line"><span class="lineno"> 1255</span> </div>
<div class="line"><span class="lineno"> 1256</span>  <span class="keywordflow">if</span> (batch_mode)</div>
<div class="line"><span class="lineno"> 1257</span>    <span class="keywordflow">return</span> {n_local_apps, app_index, 1, slot_num, is_first_local_rank, my_first_rank};</div>
<div class="line"><span class="lineno"> 1258</span>  <span class="keywordflow">return</span> {n_local_apps, app_index, n_local_apps, app_index, is_first_local_rank, my_first_rank};</div>
<div class="line"><span class="lineno"> 1259</span>}</div>
<div class="ttc" id="aMooseError_8h_html_aa959168eed29caa7aaa85ffc1319a9ad"><div class="ttname"><a href="MooseError_8h.html#aa959168eed29caa7aaa85ffc1319a9ad">mooseError</a></div><div class="ttdeci">void mooseError(Args &amp;&amp;... args)</div><div class="ttdoc">Emit an error message with the given stringified, concatenated args and terminate the application.</div><div class="ttdef"><b>Definition:</b> <a href="MooseError_8h_source.html#l00284">MooseError.h:284</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="Sampler_8C_source.html#l00140">Sampler::constructRankConfig()</a>, and <a class="el" href="MultiApp_8C_source.html#l00313">MultiApp::init()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Dec 24 2023 00:18:43 for Zapdos by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
